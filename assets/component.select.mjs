!function(){"use strict";var t={198:function(t,e,i){var s=i(899),n=i(433);var a=i(6),r=i(148),o=i(252);class l extends HTMLElement{#t=-1;#e=-1;#i=-1;#s=this.attachInternals();#n=(()=>new Map)();#a=null;#r;#o;#l;ariaActiveDescendantElement=null;static formAssociated=!0;static role="listbox";static tagName="e-listbox";static observedAttributes=["aria-activedescendant","aria-disabled","aria-multiselectable","aria-required"];static initAttributes(t){const e={"aria-orientation":t.ariaOrientation??"vertical",exportparts:"container",role:this.role};return(0,r.A)(t,e)}static initAccessibilityTree(t,e){e.ariaAtomic="true",e.ariaLive="polite",e.role=this.role,e.ariaDisabled=(0,n.A)(t.ariaDisabled).toString(),e.ariaOrientation=t.ariaOrientation,e.ariaMultiSelectable=(0,n.A)(t.ariaMultiSelectable).toString(),e.ariaRequired=(0,n.A)(t.ariaRequired).toString()}constructor(){super(),a.A.call(this,{template:"<style type=\"text/css\">:host::part(container) {\n\tdisplay: block;\n\toverflow: hidden;\n}\n\n:host(:state(--scrolled))::part(container) {\n\tscroll-behavior: smooth;\n\tscroll-snap-stop: always;\n}\n\n:host([aria-orientation='vertical']:state(--scrolled))::part(container) {\n\toverflow-y: scroll;\n}\n\n:host([aria-orientation='horizontal']:state(--scrolled))::part(container) {\n\toverflow-x: scroll;\n}\n</style><slot part=\"container\"></slot>"}),l.initAttributes(this),this.#c(),this.#h.add(o.A.Defined)}attributeChangedCallback(t,e,i){if(!1===this.isConnected)return;if(e===i)return;const s=this.#n.has(i)&&this.#n.get(i)?.$ref.deref()||null,a=(0,n.A)(i);switch(t){case"aria-activedescendant":this.#s.ariaActiveDescendantElement=s;break;case"aria-disabled":a?(this.#h.add(o.A.Disabled),this.#o?.abort()):this.#h.delete(o.A.Disabled),this.#s.ariaDisabled=i;break;case"aria-multiselectable":this.#s.ariaMultiSelectable=a.toString();break;case"aria-required":this.#s.ariaRequired=a.toString()}this.#d("Attribute Changed",t,e,i)}connectedCallback(){l.initAttributes(this),l.initAccessibilityTree(this,this.#s),this.#u()}disconnectedCallback(){this.#o?.abort(),this.#r?.abort(),this.#l?.abort()}formAssociatedCallback(t){}formDisabledCallback(t){}formResetCallback(){this.selectedIndex=this.#i}formStateRestoreCallback(t,e){}findByValue(t){for(const[e,i]of this.#n)if(t===i.value)return i;return null}search(t){const e=new Set;for(const[i,s]of this.#n)0!==s.label?.indexOf(t)&&0!==s.value?.indexOf(t)||e.add(s);return e.size>0?e:null}select(t){let e;if(t instanceof HTMLElement)e=t;else if("string"==typeof t){const i=this.#n.get(t);void 0!==i&&(e=i.$ref.deref())}return void 0!==e&&this.#b(e)}shift(t){return this.activeIndex=((this.#t+t)%this.length+this.length)%this.length,this}updateScrollbar(){const t="vertical"===this.#s.ariaOrientation,e=t?this.#p.clientHeight:this.#p.clientWidth;(t?this.#p.scrollHeight:this.#p.scrollWidth)>e?this.#h.add(o.A.Scrolled):this.#h.delete(o.A.Scrolled)}#g(t){const e={"aria-selected":t.ariaSelected??"false",id:t.id};return!1===Boolean(e.id)&&(e.id=(t=>{const{prefix:e,suffix:i,length:s=6,checklist:n}=t??{};let a;do{a="";for(let t=0;t<s;t++)a+="abekmhopctyx123456789".charAt(21*Math.random()|0);e&&(a=e+"-"+a),i&&(a+="-"+i)}while(n?.includes(a));return a})({prefix:"option",checklist:this.#a})),t.onclick=t=>this.#f(t),(0,r.A)(t,e)}#A(){return this.selectedIndex=this.#i=this.options.findIndex((t=>(0,n.A)(t.$ref.deref()?.getAttribute("aria-selected")))),this}#b(t){if(void 0!==t){const e=t.getAttributeNode("aria-selected");return this.#d("select element",t,e),!(null===e||!(0,s.A)(e.value)||(e.value="true",0))}return!1}#v(t){if(t instanceof HTMLElement)return t.setAttribute("aria-selected","false"),!0;const e=this.selectedOptions;return!!(e&&e.length>0)&&(this.selectedOptions.forEach((t=>t.setAttribute("aria-selected","false"))),!0)}get activeIndex(){return this.#t}set activeIndex(t){const e=(t%this.length+this.length)%this.length,i=this.options,s=this.#t;s>=0&&i[s].$ref.deref()?.setAttribute("aria-current","false");const n=i[e].$ref.deref();if(void 0===n)throw this.#t=-1,this.removeAttribute("aria-activedescendant"),new Error(`The option element by index ${e} is lost and cannot be activated!`);this.#t=e,this.setAttribute("aria-activedescendant",n.id),n.setAttribute("aria-current","true"),this.#h.has(o.A.Scrolled)&&n.scrollIntoView({behavior:"smooth",block:"center",inline:"center"})}get disabled(){return this.#s.states.has(o.A.Disabled)&&(0,n.A)(this.#s.ariaDisabled)&&(0,n.A)(this.ariaDisabled)}get length(){return this.#n.size}get multiple(){return(0,n.A)(this.ariaMultiSelectable)}get options(){return Array.from(this.#n.values())}get selectedIndex(){return this.#e}set selectedIndex(t){const e=-1===this.selectedIndex?null:this.options[this.selectedIndex].value;let i;if(this.dispatchEvent(new InputEvent("beforeinput",{bubbles:!0,data:e})),-1===t)i=t,this.#v();else{i=(t%this.length+this.length)%this.length,!1===this.multiple&&this.#v();const e=this.options[i].$ref.deref();this.#b(e)}this.#e=i;const s=-1===i?null:this.options[i].value;this.dispatchEvent(new InputEvent("input",{bubbles:!0,data:s}))}get selectedOptions(){const t=[];for(const{$ref:e}of this.#n.values()){const i=e.deref();if(i&&(0,n.A)(i.ariaSelected)&&(t.push(i),!1===this.multiple))return t}return t.length>0?t:null}get value(){const t=this.selectedOptions?.map((t=>this.#n.get(t.id)?.value)).filter((t=>"string"==typeof t));return t?this.multiple?t:t[0]:null}get#h(){return this.#s.states}get#p(){return this.#s.shadowRoot?.querySelector("[part=container]")}#c(){return this.#l?.abort(),this.#l=new AbortController,this.addEventListener("slotchange",(t=>{const e=t.target.assignedElements({flatten:!0});this.#n.clear(),e.forEach((t=>{if("option"===t.role){this.#g(t);const e={$ref:new WeakRef(t),label:t.ariaLabel||t.textContent,value:t.dataset.value??t.getAttribute("value")};this.#n.set(t.id,e)}})),this.#n.size>0?(this.#a=Array.from(this.#n.keys()),this.setAttribute("aria-owns",this.#a.join(" "))):(this.#a=null,this.removeAttribute("aria-owns")),this.#A()}),{signal:this.#l.signal}),this.#l}#u(){this.#r?.abort(),this.#r=new AbortController;const t={signal:this.#r.signal};return this.addEventListener("focus",(t=>this.#m(t)),t),this.addEventListener("blur",(t=>this.#x(t)),t),this.#r}#x(t){this.#o?.abort(),this.#d(`event:${t.type}`)}#m(t){this.#C(),this.#d(`event:${t.type}`)}#C(){this.#o?.abort(),this.#o=new AbortController;const t={signal:this.#o.signal};return this.addEventListener("click",(t=>this.#f(t)),t),this.addEventListener("keydown",(t=>this.#k(t)),t),this.#o}#f(t){t.stopPropagation();const e=t.currentTarget;this.selectedIndex=this.activeIndex=this.#a?.indexOf(e.id)??-1,this.#d(`event:${t.type}`)}#k(t){switch(t.key){case"Enter":this.selectedIndex=this.activeIndex,t.stopPropagation();break;case"Space":this.selectedIndex,this.activeIndex,this.selectedIndex=this.activeIndex;break;case"End":this.activeIndex=this.length-1;break;case"Home":this.activeIndex=0;break;case"ArrowUp":this.#t&&(t.altKey?this.activeIndex=0:this.shift(-1),t.stopPropagation()),t.preventDefault();break;case"ArrowDown":t.altKey?this.activeIndex=this.length-1:this.shift(1),t.preventDefault();break;default:return void/\w+/.test(t.key)}this.#d(`event:${t.type}`,this.#s.shadowRoot?.activeElement,this.#t)}#d(t){console.groupCollapsed(`ListboxElement: ${t}`);for(var e=arguments.length,i=new Array(e>1?e-1:0),s=1;s<e;s++)i[s-1]=arguments[s];i.length>0&&console.log("Arguments: ",i),console.table(this.#n),console.debug(this.#s),console.dir(this),console.groupEnd()}}customElements.define(l.tagName,l),customElements.get(l.tagName)},252:function(t,e){var i=function(t){return t.Animation="--animating",t.Collapsed="--collapsed",t.Defined="--defined",t.Disabled="--disabled",t.Expanded="--expanded",t.Interactive="--interactive",t.Loaded="--loaded",t.Scrolled="--scrolled",t}(i||{});e.A=i},899:function(t,e,i){e.A=t=>"string"==typeof t?["off","false"].includes(t.trim().toLocaleLowerCase()):!1===Boolean(t)},433:function(t,e,i){e.A=t=>"string"==typeof t?["on","true"].includes(t.trim().toLocaleLowerCase()):Boolean(t)},6:function(t,e){e.A=function(t){const{$template:e,template:i,delegatesFocus:s=!1,mode:n="closed",serializable:a=!1}=t,r=this.attachShadow({delegatesFocus:s,mode:n,serializable:a});return e instanceof DocumentFragment&&r.appendChild(e.cloneNode(!0)),"string"==typeof i&&r.setHTMLUnsafe(i),r}},947:function(t,e){e.A=function(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}},148:function(t,e,i){var s=i(947);e.A=function(t,e,i){return((0,s.A)(e)?Object.entries(e):[[e,i]]).forEach((e=>{let[i,s]=e;const n=String(i);if(null===s)t.removeAttribute(n);else if(s instanceof Attr)t.setAttributeNode(s);else{const e=t.getAttributeNode(n),i=String(s);null!==e?e.value=i:t.setAttribute(n,i)}})),new Map(t.getAttributeNames().sort().map((e=>[e,t.getAttributeNode(e)])))}}},e={};function i(s){var n=e[s];if(void 0!==n)return n.exports;var a=e[s]={exports:{}};return t[s](a,a.exports,i),a.exports}i.d=function(t,e){for(var s in e)i.o(e,s)&&!i.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:e[s]})},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)};var s=i(899),n=i(433),a=i(6),r=i(148),o=i(252);i(198);class l extends HTMLElement{#y;#s=this.attachInternals();#E;#r;#o;#w;#l;static formAssociated=!0;static role="combobox";static tagName="c-select";static observedAttributes=["aria-disabled","aria-expanded","aria-multiselectable","aria-required"];static initAttributes(t,e){const i={"aria-atomic":!0,"aria-expanded":!1,exportparts:t.getAttribute("exportparts"),id:t.id,role:this.role,tabIndex:t.tabIndex},{internals:n,shadowRoot:a}=e;if((0,s.A)(i.exportparts)&&a instanceof ShadowRoot){const t=a.querySelectorAll("[part]");t.length&&(i.exportparts=Array.from(t).map((t=>t.part.toString())).join(" "))}return(0,s.A)(i.id)&&t.isConnected&&(i.id=[this.role,Math.round(performance.now())].join("-")),t.isConnected&&i.tabIndex<0&&n instanceof ElementInternals&&n.form instanceof HTMLElement&&(i.tabIndex=0),(0,r.A)(t,i)}static initAccessibilityTree(t,e){const{internals:i,$listbox:s,$status:a}=e;i.ariaAtomic="true",i.ariaHasPopup="listbox",i.ariaLive="polite",i.role=this.role,i.ariaDisabled=(0,n.A)(t.ariaDisabled).toString(),i.ariaExpanded=(0,n.A)(t.ariaExpanded).toString(),i.ariaRequired=(0,n.A)(t.ariaRequired).toString(),i.ariaMultiSelectable=(0,n.A)(t.ariaMultiSelectable).toString(),s.ariaMultiSelectable=i.ariaMultiSelectable,a.ariaLabel=t.ariaLabel,a.ariaPlaceholder=t.ariaPlaceholder}constructor(){super(),this.#y=a.A.call(this,{template:'<link href="http://assets.protosite.rocks/core/component.select.css" rel="stylesheet" type="text/css"><style type="text/css">:host(:state(--defined)) {\n\tcontent-visibility: hidden;\n}\n:host(:state(--loaded)) {\n\tcontent-visibility: visible;\n}</style><div id="button" aria-controls="listbox" role="button" tabindex="0"><div id="status" aria-placeholder="Выбрать..." part="selectedcontent" role="status"></div></div><e-listbox id="picker" aria-labelledby="button" part="listbox" tabindex="0"><slot></slot></e-listbox>',delegatesFocus:!0}),l.initAttributes(this,{shadowRoot:this.#y}),this.#h.add(o.A.Defined)}attributeChangedCallback(t,e,i){if(!1===this.isConnected)return;if(e===i)return;const a=(0,n.A)(i),r=(0,s.A)(i);switch(t){case"aria-disabled":a?(this.#h.add(o.A.Disabled),this.#o?.abort()):this.#h.delete(o.A.Disabled),this.#s.ariaDisabled=a.toString();break;case"aria-expanded":this.#h.delete(r?o.A.Expanded:o.A.Collapsed),this.#h.add(a?o.A.Expanded:o.A.Collapsed),this.#s.ariaExpanded=a.toString();break;case"aria-multiselectable":this.#s.ariaMultiSelectable=a.toString()}this.#d("Attribute Changed",t,e,i)}connectedCallback(){l.initAttributes(this,{internals:this.#s}),l.initAccessibilityTree(this,{$listbox:this.#I,$status:this.#$,internals:this.#s}),this.#u(),this.#S(),this.#D(),this.#h.add(o.A.Interactive);const t=this.#y.querySelector("link");t&&(t.onload=()=>this.#h.add(o.A.Loaded)),this.#d("Connected Callback")}disconnectedCallback(){this.#r?.abort(),this.#o?.abort(),this.#E?.disconnect(),this.#w?.abort(),this.#l?.abort()}formResetCallback(){this.#I.formResetCallback()}hidePicker(){return this.#h.has(o.A.Collapsed)||(0,r.A)(this,"aria-expanded",!1),this}showPicker(){return this.#h.has(o.A.Expanded)||((0,r.A)(this,"aria-expanded",!0),this.#I.focus(),this.#I.updateScrollbar()),this}get disabled(){return this.#h.has(o.A.Disabled)&&(0,n.A)(this.#s.ariaDisabled)&&(0,n.A)(this.ariaDisabled)}get expanded(){return this.#h.has(o.A.Expanded)&&(0,n.A)(this.#s.ariaExpanded)&&(0,n.A)(this.ariaExpanded)}get multiple(){return(0,n.A)(this.#s.ariaMultiSelectable)}get name(){return(this.dataset.name||this.getAttribute("name"))??null}get options(){return this.#I.options}get readonly(){return(0,n.A)(this.#s.ariaReadOnly)}get required(){return(0,n.A)(this.#s.ariaRequired)}get length(){return this.#I.length}get type(){return"select"+(this.multiple?"-multiple":"-one")}get value(){return this.#I.value}get#L(){const t=this.#y.getElementById("button");if(null===t)throw new Error("Button element not found but required!");return t}get#$(){const t=this.#y.getElementById("status");if(null===t)throw new Error("Element of the selected content not found but required!");return t}get#I(){const t=this.#y.getElementById("picker");if(null===t)throw new Error("Listbox element not found but required!");return t}get#h(){return this.#s.states}#S(){this.#w?.abort(),this.#w=new AbortController;const t={capture:!1,passive:!0,signal:this.#w.signal};return this.#I.addEventListener("beforeinput",(t=>this.#M(t)),t),this.#I.addEventListener("input",(t=>{this.#O(t),this.#M(t)}),t),this.#w}#O(t){const{label:e=null,value:i=null}=this.options[this.#I.selectedIndex]??{};this.#s.setFormValue(i),this.#$.innerText=e??"",null!==i&&this.hidePicker()}#u(){this.#r?.abort(),this.#r=new AbortController;const t={signal:this.#r.signal};return this.addEventListener("focus",(t=>this.#m(t)),t),this.addEventListener("blur",(t=>this.#x(t)),t),this.#r}#x(t){this.hidePicker(),this.#o?.abort(),this.#d(`event:${t.type}`)}#m(t){this.#C(),this.#d(`event:${t.type}`)}#C(){this.#o?.abort(),this.#o=new AbortController;const t={capture:!1,passive:!0,signal:this.#o.signal};return this.#I.addEventListener("animationend",(t=>this.#B(t)),t),this.addEventListener("click",(t=>this.#f(t)),t),this.addEventListener("keydown",(t=>this.#k(t)),t),this.#o}#B(t){this.#h.delete(o.A.Animation),this.#h.has(o.A.Expanded)&&this.#I.focus(),this.#d(`event:${t.type}`)}#f(t){this.expanded?this.hidePicker():this.showPicker(),this.#d(`event:${t.type}`)}#k(t){switch(t.key){case"ArrowDown":case"Enter":this.showPicker();break;case"ArrowUp":case"Escape":this.#L.focus(),this.hidePicker();break;default:return}this.#d(`event:${t.type}`,this.#y.activeElement)}#D(){return this.#E?.disconnect(),this.#E=new MutationObserver((t=>t.forEach((t=>{if("attributes"===t.type){const{attributeName:e}=t,i=e?t.target.getAttribute(e):null;e&&i?this.setAttribute(e,i):e&&this.removeAttribute(e)}})))),this.#E.observe(this.#I,{attributes:!0,attributeFilter:["aria-activedescendant","aria-owns"]}),this}#d(t){console.groupCollapsed(`SelectComponent: ${t}`);for(var e=arguments.length,i=new Array(e>1?e-1:0),s=1;s<e;s++)i[s-1]=arguments[s];i.length>0&&console.log("Arguments: ",i),console.debug(this.#s),console.dir(this),console.groupEnd()}#M(t){const{bubbles:e,data:i,type:s}=t,n=new(0,Object.getPrototypeOf(t).constructor)(s,{bubbles:e,data:i});return this.dispatchEvent(n),this}}customElements.define(l.tagName,l),customElements.get(l.tagName)}();