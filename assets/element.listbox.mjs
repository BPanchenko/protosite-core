var vt=Object.create;var x=Object.defineProperty;var At=Object.getOwnPropertyDescriptor;var It=Object.getOwnPropertyNames;var Tt=Object.getPrototypeOf,Et=Object.prototype.hasOwnProperty;var o=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var wt=(e,t,i,r)=>{if(t&&typeof t=="object"||typeof t=="function")for(let n of It(t))!Et.call(e,n)&&n!==i&&x(e,n,{get:()=>t[n],enumerable:!(r=At(t,n))||r.enumerable});return e};var kt=(e,t,i)=>(i=e!=null?vt(Tt(e)):{},wt(t||!e||!e.__esModule?x(i,"default",{value:e,enumerable:!0}):i,e));var v=o((Ne,S)=>{"use strict";function Ot(e,t,i){return e===e&&(i!==void 0&&(e=e<=i?e:i),t!==void 0&&(e=e>=t?e:t)),e}S.exports=Ot});var I=o(($e,A)=>{"use strict";var Lt=typeof global=="object"&&global&&global.Object===Object&&global;A.exports=Lt});var E=o((Fe,T)=>{"use strict";var Mt=I(),qt=typeof self=="object"&&self&&self.Object===Object&&self,jt=Mt||qt||Function("return this")();T.exports=jt});var u=o((Pe,w)=>{"use strict";var Dt=E(),Ht=Dt.Symbol;w.exports=Ht});var O=o((Be,k)=>{"use strict";function Ct(e,t){for(var i=-1,r=e==null?0:e.length,n=Array(r);++i<r;)n[i]=t(e[i],i,e);return n}k.exports=Ct});var M=o((ze,L)=>{"use strict";var Rt=Array.isArray;L.exports=Rt});var H=o((We,D)=>{"use strict";var q=u(),j=Object.prototype,Nt=j.hasOwnProperty,$t=j.toString,h=q?q.toStringTag:void 0;function Ft(e){var t=Nt.call(e,h),i=e[h];try{e[h]=void 0;var r=!0}catch{}var n=$t.call(e);return r&&(t?e[h]=i:delete e[h]),n}D.exports=Ft});var R=o((_e,C)=>{"use strict";var Pt=Object.prototype,Bt=Pt.toString;function zt(e){return Bt.call(e)}C.exports=zt});var P=o((Ge,F)=>{"use strict";var N=u(),Wt=H(),_t=R(),Gt="[object Null]",Kt="[object Undefined]",$=N?N.toStringTag:void 0;function Vt(e){return e==null?e===void 0?Kt:Gt:$&&$ in Object(e)?Wt(e):_t(e)}F.exports=Vt});var z=o((Ke,B)=>{"use strict";function Ut(e){return e!=null&&typeof e=="object"}B.exports=Ut});var f=o((Ve,W)=>{"use strict";var Yt=P(),Xt=z(),Jt="[object Symbol]";function Qt(e){return typeof e=="symbol"||Xt(e)&&Yt(e)==Jt}W.exports=Qt});var b=o((Ue,U)=>{"use strict";var _=u(),Zt=O(),te=M(),ee=f(),ie=1/0,G=_?_.prototype:void 0,K=G?G.toString:void 0;function V(e){if(typeof e=="string")return e;if(te(e))return Zt(e,V)+"";if(ee(e))return K?K.call(e):"";var t=e+"";return t=="0"&&1/e==-ie?"-0":t}U.exports=V});var X=o((Ye,Y)=>{"use strict";var re=/\s/;function ne(e){for(var t=e.length;t--&&re.test(e.charAt(t)););return t}Y.exports=ne});var Q=o((Xe,J)=>{"use strict";var se=X(),oe=/^\s+/;function ae(e){return e&&e.slice(0,se(e)+1).replace(oe,"")}J.exports=ae});var tt=o((Je,Z)=>{"use strict";function le(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}Z.exports=le});var nt=o((Qe,rt)=>{"use strict";var ce=Q(),et=tt(),de=f(),it=NaN,he=/^[-+]0x[0-9a-f]+$/i,ue=/^0b[01]+$/i,fe=/^0o[0-7]+$/i,be=parseInt;function pe(e){if(typeof e=="number")return e;if(de(e))return it;if(et(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=et(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=ce(e);var i=ue.test(e);return i||fe.test(e)?be(e.slice(2),i?2:8):he.test(e)?it:+e}rt.exports=pe});var at=o((Ze,ot)=>{"use strict";var ge=nt(),st=1/0,me=17976931348623157e292;function ye(e){if(!e)return e===0?e:0;if(e=ge(e),e===st||e===-st){var t=e<0?-1:1;return t*me}return e===e?e:0}ot.exports=ye});var ct=o((ti,lt)=>{"use strict";var xe=at();function Se(e){var t=xe(e),i=t%1;return t===t?i?t-i:t:0}lt.exports=Se});var ht=o((ei,dt)=>{"use strict";var ve=b();function Ae(e){return e==null?"":ve(e)}dt.exports=Ae});var ft=o((ii,ut)=>{"use strict";var Ie=v(),Te=b(),Ee=ct(),we=ht();function ke(e,t,i){return e=we(e),i=i==null?0:Ie(Ee(i),0,e.length),t=Te(t),e.slice(i,i+t.length)==t}ut.exports=ke});var g=kt(ft(),1);var Oe=e=>typeof e=="string"?["off","false"].includes(e.trim().toLocaleLowerCase()):!e,bt=Oe;var Le=e=>typeof e=="string"?["on","true"].includes(e.trim().toLocaleLowerCase()):!!e,c=Le;var pt="abekmhopctyx123456789",Me=e=>{let{prefix:t,suffix:i,length:r=6,checklist:n}=e??{},s;do{s="";for(let l=0;l<r;l++)s+=pt.charAt(Math.random()*pt.length|0);t&&(s=t+"-"+s),i&&(s+="-"+i)}while(n?.includes(s));return s},gt=Me;function qe(e){let{$template:t,template:i,delegatesFocus:r=!1,mode:n="closed",serializable:s=!1}=e,l=this.attachShadow({delegatesFocus:r,mode:n,serializable:s});return t instanceof DocumentFragment&&l.appendChild(t.cloneNode(!0)),typeof i=="string"&&l.setHTMLUnsafe(i),l}var mt=qe;function je(e){var t=typeof e;return!!e&&(t=="object"||t=="function")}var yt=je;function De(e,t,i){return(yt(t)?Object.entries(t):[[t,i]]).forEach(([n,s])=>{let l=String(n);if(s===null)e.removeAttribute(l);else if(s instanceof Attr)e.setAttributeNode(s);else{let y=e.getAttributeNode(l),a=String(s);y!==null?y.value=a:e.setAttribute(l,a)}}),new Map(e.getAttributeNames().sort().map(n=>[n,e.getAttributeNode(n)]))}var p=De;var xt=(a=>(a.Animation="--animating",a.Collapsed="--collapsed",a.Defined="--defined",a.Disabled="--disabled",a.Expanded="--expanded",a.Interactive="--interactive",a.Loaded="--loaded",a.Scrolled="--scrolled",a))(xt||{}),d=xt;var St=`<style title="Shadow Dom Layout" type="text/css">:host(:state(--defined)),
:host::part(container) {
	display: block;
}

:host([aria-hidden='true'])::part(container) {
	visibility: hidden;
}
</style><style title="Scrollbars" type="text/css">:host(:state(--scrolled))::part(container) {
	overflow: auto;
	scroll-behavior: smooth;
	scroll-snap-stop: always;
}

:host([aria-orientation='vertical']:state(--scrolled))::part(container) {
	overflow: hidden scroll;
}

:host([aria-orientation='horizontal']:state(--scrolled))::part(container) {
	overflow: scroll hidden;
}

:host([aria-hidden='true'])::part(container) {
	overflow: hidden;
}
</style><slot part="container"></slot>`;var Ce=({label:e,value:t},i)=>typeof e=="string"&&(0,g.default)(e,i)||typeof t=="string"&&(0,g.default)(t,i),m=class e extends HTMLElement{#r=-1;#c=-1;#d=-1;#e=this.attachInternals();#t=new Map;#s=null;#o;#i;#a;ariaActiveDescendantElement=null;static formAssociated=!0;static role="listbox";static tagName="e-listbox";static observedAttributes=["aria-activedescendant","aria-disabled","aria-multiselectable","aria-required"];static initAttributes(t){let i={"aria-orientation":t.ariaOrientation??"vertical",exportparts:"container",role:this.role};return p(t,i)}static initAccessibilityTree(t,i){i.ariaAtomic="true",i.ariaLive="polite",i.role=this.role,i.ariaDisabled=c(t.ariaDisabled).toString(),i.ariaOrientation=t.ariaOrientation,i.ariaMultiSelectable=c(t.ariaMultiSelectable).toString(),i.ariaRequired=c(t.ariaRequired).toString()}constructor(){super(),mt.call(this,{template:St}),e.initAttributes(this),this.#g(),this.#n.add(d.Defined)}attributeChangedCallback(t,i,r){if(this.isConnected===!1||i===r)return;let n=this.#t.has(r)&&this.#t.get(r)?.$ref.deref()||null,s=c(r);switch(t){case"aria-activedescendant":this.#e.ariaActiveDescendantElement=n;break;case"aria-disabled":s?(this.#n.add(d.Disabled),this.#i?.abort()):this.#n.delete(d.Disabled),this.#e.ariaDisabled=r;break;case"aria-multiselectable":this.#e.ariaMultiSelectable=s.toString();break;case"aria-required":this.#e.ariaRequired=s.toString();break;default:}}connectedCallback(){e.initAttributes(this),e.initAccessibilityTree(this,this.#e),this.#m()}disconnectedCallback(){this.#i?.abort(),this.#o?.abort(),this.#a?.abort()}formAssociatedCallback(t){}formDisabledCallback(t){}formResetCallback(){this.selectedIndex=this.#d}formStateRestoreCallback(t,i){}findByValue(t){for(let[i,r]of this.#t)if(t===r.value)return r;return null}search(t){let i=new Set;for(let[r,n]of this.#t)Ce(n,t)&&i.add(n);return i.size>0?i:null}select(t){let i;if(t instanceof HTMLElement)i=t;else if(typeof t=="string"){let r=this.#t.get(t);r!==void 0&&(i=r.$ref.deref())}return i!==void 0?this.#h(i):!1}shift(t){return this.activeIndex=((this.#r+t)%this.length+this.length)%this.length,this}updateScrollbar(){let t=this.#e.ariaOrientation==="vertical",i=t?this.#l.clientHeight:this.#l.clientWidth;(t?this.#l.scrollHeight:this.#l.scrollWidth)>i?this.#n.add(d.Scrolled):this.#n.delete(d.Scrolled)}#b(t){let i={"aria-selected":t.ariaSelected??"false",id:t.id};return i.id||(i.id=gt({prefix:"option",checklist:this.#s})),t.onclick=r=>this.#f(r),p(t,i)}#p(){return this.selectedIndex=this.#d=this.options.findIndex(t=>c(t.$ref.deref()?.getAttribute("aria-selected"))),this}#h(t){if(t!==void 0){let i=t.getAttributeNode("aria-selected");return i!==null&&bt(i.value)?(i.value="true",!0):!1}else return!1}#u(t){if(t instanceof HTMLElement)return t.setAttribute("aria-selected","false"),!0;let i=this.selectedOptions;return i&&i.length>0?(this.selectedOptions.forEach(r=>r.setAttribute("aria-selected","false")),!0):!1}get activeIndex(){return this.#r}set activeIndex(t){let i=(t%this.length+this.length)%this.length,r=this.options,n=this.#r;n>=0&&r[n].$ref.deref()?.setAttribute("aria-current","false");let s=r[i].$ref.deref();if(s!==void 0)this.#r=i,this.setAttribute("aria-activedescendant",s.id),s.setAttribute("aria-current","true"),this.#n.has(d.Scrolled)&&s.scrollIntoView({behavior:"smooth",block:"center",inline:"center"});else throw this.#r=-1,this.removeAttribute("aria-activedescendant"),new Error(`The option element by index ${i} is lost and cannot be activated!`)}get disabled(){return this.#e.states.has(d.Disabled)&&c(this.#e.ariaDisabled)&&c(this.ariaDisabled)}get length(){return this.#t.size}get multiple(){return c(this.ariaMultiSelectable)}get options(){return Array.from(this.#t.values())}get owns(){return this.#s}get selectedIndex(){return this.#c}set selectedIndex(t){let i=this.selectedIndex===-1?null:this.options[this.selectedIndex].value;this.dispatchEvent(new InputEvent("beforeinput",{bubbles:!0,data:i}));let r;if(t===-1)r=t,this.#u();else{r=(t%this.length+this.length)%this.length,this.multiple===!1&&this.#u();let s=this.options[r].$ref.deref();this.#h(s)}this.#c=r;let n=r===-1?null:this.options[r].value;this.dispatchEvent(new InputEvent("input",{bubbles:!0,data:n}))}get selectedOptions(){let t=[];for(let{$ref:i}of this.#t.values()){let r=i.deref();if(r&&c(r.ariaSelected)&&(t.push(r),this.multiple===!1))return t}return t.length>0?t:null}get value(){let t=this.selectedOptions?.map(i=>this.#t.get(i.id)?.value).filter(i=>typeof i=="string");return t?this.multiple?t:t[0]:null}get#n(){return this.#e.states}get#l(){return this.#e.shadowRoot?.querySelector("[part=container]")}#g(){return this.#a?.abort(),this.#a=new AbortController,this.addEventListener("slotchange",t=>{let i=t.target.assignedElements({flatten:!0});this.#t.clear(),i.forEach(r=>{if(r.role==="option"){this.#b(r);let n={$ref:new WeakRef(r),label:r.ariaLabel||r.textContent,value:r.dataset.value??r.getAttribute("value")};this.#t.set(r.id,n)}}),this.#t.size>0?(this.#s=Array.from(this.#t.keys()),this.setAttribute("aria-owns",this.#s.join(" "))):(this.#s=null,this.removeAttribute("aria-owns")),this.#p()},{signal:this.#a.signal}),this.#a}#m(){this.#o?.abort(),this.#o=new AbortController;let t={signal:this.#o.signal};return this.addEventListener("focus",i=>this.#x(i),t),this.addEventListener("blur",i=>this.#y(i),t),this.#o}#y(t){this.#i?.abort()}#x(t){this.#S()}#S(){this.#i?.abort(),this.#i=new AbortController;let t={signal:this.#i.signal};return this.addEventListener("click",i=>this.#f(i),t),this.addEventListener("keydown",i=>this.#v(i),t),this.#i}#f(t){t.stopPropagation();let i=t.currentTarget;this.selectedIndex=this.activeIndex=this.owns!==null?this.owns.indexOf(i.id):-1}#v(t){switch(t.key){case"Enter":this.selectedIndex=this.activeIndex,t.stopPropagation();break;case"Space":this.selectedIndex===this.activeIndex?this.selectedIndex=this.activeIndex:this.selectedIndex=this.activeIndex;break;case"End":this.activeIndex=this.length-1;break;case"Home":this.activeIndex=0;break;case"ArrowUp":this.#r&&(t.altKey?this.activeIndex=0:this.shift(-1),t.stopPropagation()),t.preventDefault();break;case"ArrowDown":t.altKey?this.activeIndex=this.length-1:this.shift(1),t.preventDefault();break;default:/\w+/.test(t.key);return}}},xi=m;export{xi as default};
