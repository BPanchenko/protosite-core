<!doctype html>
<html lang="ru">
	<head>
		<title>[TEST FORM OBJECT] Select Field Form ⁕ Protosite Core</title>

		<link
			rel="preload"
			href="http://assets.protosite.rocks/core/select-field.css"
			as="style"
		>
		<link
			rel="preload"
			href="http://assets.protosite.rocks/fonts/iconic/iconic-sm.ttf"
			as="font"
			type="font/ttf"
			crossorigin
		>

		<link
			href="http://assets.protosite.rocks/fonts/iconic/stylesheet.css"
			rel="stylesheet"
			type="text/css"
		>
		<link
			href="http://assets.protosite.rocks/uikit/document.css"
			rel="stylesheet"
			type="text/css"
		>
		<link
			href="http://assets.protosite.rocks/uikit/utilities.css"
			rel="stylesheet"
			type="text/css"
		>
		<link
			href="http://assets.protosite.rocks/uikit/component/panel.css"
			rel="stylesheet"
			type="text/css"
		>
		
		<script src="../component.select-field.mjs" type="module"></script>
		<style>
			.u-grid {
				display: grid;
				grid-template-columns: auto auto;
				gap: 8vmin;
				justify-content: space-around;
				align-items: center;
			}

			.c-panel:first-of-type .u-grid {
				block-size: 22dvh;
				margin-block-end: 8dvh;
			}
		</style>
	</head>
	<body class="t-document">
		<main class="u-container" data-testid="container">
			<form enctype="text/plain" data-testid="main-form">
				<section class="c-panel s-clean">
					<div class="u-grid">
						<c-select-field
							aria-label="Выбран:"
							aria-placeholder="Плод на выбор"
							autofocus
							data-name="custom-field-fruit"
							data-testid="target-component"
						>
							<div role="option" value="kumquat">Кумкват</div>
							<div role="option" value="pseudocydonia"><div>Псевдоайва</div></div>
							<div role="option" value="salacca-wallichiana">Ракум-салакка</div>
							<div role="option" value="mammea-americana">Антильский абрикос</div>
							<div role="option" value="casimiroa-edulis">Белая сапота</div>
						</c-select-field>
					</div>
				</section>
				<section class="c-panel">
					<output data-testid="output"></output>
				</section>
				<section class="c-panel s-clean u-text-center">
					<button data-testid="submitter" type="submit">Сохранить</button>
					<button type="reset">Очистить</button>
				</section>
			</form>
			<script>
				const $component = document.querySelector('[data-testid=target-component]')
				const $form = document.querySelector('[data-testid=main-form]')
				const $output = document.querySelector('[data-testid=output]')
				const $submitter = $form.querySelector('[data-testid=submitter]')

				$form.addEventListener('submit', event => {
					event.preventDefault()
					const $data = document.createElement('pre')
					const formData = new FormData($form, $submitter)

					console.log($form.elements)
					console.log(Array.from(formData.keys()), Array.from(formData.values()))

					for (const [key, value] of formData) {
						$data.textContent += `${key}: ${value}\n`;
					}
					$output.prepend($data)
				})
			</script>
		</main>
	</body>
</html>
